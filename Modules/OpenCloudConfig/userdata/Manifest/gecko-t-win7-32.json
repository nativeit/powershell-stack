{
  "Components": [
    {
      "ComponentName": "KillXenDPriv.exe",
      "ComponentType": "CommandRun",
      "Comment": "See https://bugzilla.mozilla.org/show_bug.cgi?id=1399401#c43 and https://bugzilla.mozilla.org/show_bug.cgi?id=1394757",
      "Command": "taskkill",
      "Arguments": [
        "/im",
        "XenDPriv.exe",
        "/f"
      ],
      "Validate": {
        "PathsNotExist": [
          "C:\\Program Files\\Citrix\\XenTools\\XenDPriv.exe"
        ]
      }
    },
    {
      "ComponentName": "DeleteXenDPriv.exe",
      "ComponentType": "CommandRun",
      "Comment": "See https://bugzilla.mozilla.org/show_bug.cgi?id=1399401#c43 and https://bugzilla.mozilla.org/show_bug.cgi?id=1394757",
      "Command": "cmd.exe",
      "Arguments": [
        "/c",
        "del",
        "/f",
        "/q",
        "\"C:\\Program Files\\Citrix\\XenTools\\XenDPriv.exe\""
      ],
      "Validate": {
        "PathsNotExist": [
          "C:\\Program Files\\Citrix\\XenTools\\XenDPriv.exe"
        ]
      },
      "DependsOn": [
        {
          "ComponentType": "CommandRun",
          "ComponentName": "KillXenDPriv.exe"
        }
      ]
    },
    {
      "ComponentName": "LogDirectory",
      "ComponentType": "DirectoryCreate",
      "Comment": "Required by OpenCloudConfig for DSC logging",
      "Path": "C:\\log"
    },
    {
      "ComponentName": "StackdriverLogging",
      "ComponentType": "ExeInstall",
      "Comment": "https://bugzilla.mozilla.org/show_bug.cgi?id=1588757",
      "Url": "https://dl.google.com/cloudagents/windows/StackdriverLogging-v1-9.exe",
      "Arguments": [
        "/S"
      ],
      "Validate": {
        "PathsExist": [
          "C:\\Program Files\\Stackdriver\\LoggingAgent\\config.d"
        ],
        "ServiceStatus": [
          {
            "Name": "StackdriverLogging",
            "Status": "running"
          }
        ]
      }
    },
    {
      "ComponentName": "fluentd_gw_exe",
      "ComponentType": "ChecksumFileDownload",
      "Comment": "https://bugzilla.mozilla.org/show_bug.cgi?id=1588757",
      "Source": "https://raw.githubusercontent.com/mozilla-releng/OpenCloudConfig/master/userdata/Configuration/fluentd/gw.exe.conf",
      "Target": "C:\\Program Files\\Stackdriver\\LoggingAgent\\config.d\\gw.exe.conf",
      "DependsOn": [
        {
          "ComponentType": "ExeInstall",
          "ComponentName": "StackdriverLogging"
        }
      ]
    },
    {
      "ComponentName": "fluentd_gw_service",
      "ComponentType": "ChecksumFileDownload",
      "Comment": "https://bugzilla.mozilla.org/show_bug.cgi?id=1588757",
      "Source": "https://raw.githubusercontent.com/mozilla-releng/OpenCloudConfig/master/userdata/Configuration/fluentd/gw.service.conf",
      "Target": "C:\\Program Files\\Stackdriver\\LoggingAgent\\config.d\\gw.service.conf",
      "DependsOn": [
        {
          "ComponentType": "ExeInstall",
          "ComponentName": "StackdriverLogging"
        }
      ]
    },
    {
      "ComponentName": "fluentd_gw_wrapper",
      "ComponentType": "ChecksumFileDownload",
      "Comment": "https://bugzilla.mozilla.org/show_bug.cgi?id=1588757",
      "Source": "https://raw.githubusercontent.com/mozilla-releng/OpenCloudConfig/master/userdata/Configuration/fluentd/gw.wrapper.conf",
      "Target": "C:\\Program Files\\Stackdriver\\LoggingAgent\\config.d\\gw.wrapper.conf",
      "DependsOn": [
        {
          "ComponentType": "ExeInstall",
          "ComponentName": "StackdriverLogging"
        }
      ]
    },
    {
      "ComponentName": "fluentd_occ",
      "ComponentType": "ChecksumFileDownload",
      "Comment": "https://bugzilla.mozilla.org/show_bug.cgi?id=1588757",
      "Source": "https://raw.githubusercontent.com/mozilla-releng/OpenCloudConfig/master/userdata/Configuration/fluentd/occ.conf",
      "Target": "C:\\Program Files\\Stackdriver\\LoggingAgent\\config.d\\occ.conf",
      "DependsOn": [
        {
          "ComponentType": "ExeInstall",
          "ComponentName": "StackdriverLogging"
        }
      ]
    },
    {
      "ComponentName": "fluentd_redact",
      "ComponentType": "ChecksumFileDownload",
      "Comment": "https://bugzilla.mozilla.org/show_bug.cgi?id=1588757",
      "Source": "https://raw.githubusercontent.com/mozilla-releng/OpenCloudConfig/master/userdata/Configuration/fluentd/redact.conf",
      "Target": "C:\\Program Files\\Stackdriver\\LoggingAgent\\config.d\\redact.conf",
      "DependsOn": [
        {
          "ComponentType": "ExeInstall",
          "ComponentName": "StackdriverLogging"
        }
      ]
    },
    {
      "ComponentName": "NxLog",
      "ComponentType": "MsiInstall",
      "Comment": "Maintenance Toolchain - forwards event logs to papertrail",
      "Url": "https://nxlog.co/system/files/products/files/348/nxlog-ce-2.10.2150.msi",
      "Name": "NXLog-CE",
      "ProductId": "D5F06971-73E1-4B19-928F-50707ABCCC6E",
      "sha512": "41e052f8d08099eeccca9f8a78d72ba2a2ef88c67f2e046b3f33af6809c0271baf82c2819609acc7020dc8420cde337c096f7e12a9b4ae555645dfb5b3c961c5"
    },
    {
      "ComponentName": "PaperTrailEncryptionCertificate",
      "ComponentType": "ChecksumFileDownload",
      "Comment": "Maintenance Toolchain - not essential for building firefox",
      "Source": "https://raw.githubusercontent.com/mozilla-releng/OpenCloudConfig/master/userdata/Configuration/nxlog/papertrail-bundle.pem",
      "Target": "C:\\Program Files\\nxlog\\cert\\papertrail-bundle.pem",
      "DependsOn": [
        {
          "ComponentType": "MsiInstall",
          "ComponentName": "NxLog"
        }
      ]
    },
    {
      "ComponentName": "NxLogPaperTrailConfiguration",
      "ComponentType": "ChecksumFileDownload",
      "Comment": "Maintenance Toolchain - not essential for building firefox",
      "Source": "https://raw.githubusercontent.com/mozilla-releng/OpenCloudConfig/master/userdata/Configuration/nxlog/win7.conf",
      "Target": "C:\\Program Files\\nxlog\\conf\\nxlog.conf",
      "DependsOn": [
        {
          "ComponentType": "ChecksumFileDownload",
          "ComponentName": "PaperTrailEncryptionCertificate"
        }
      ]
    },
    {
      "ComponentName": "Start_nxlog",
      "ComponentType": "ServiceControl",
      "Comment": "Maintenance Toolchain - not essential for building firefox",
      "Name": "nxlog",
      "StartupType": "Automatic",
      "State": "Running",
      "DependsOn": [
        {
          "ComponentType": "ChecksumFileDownload",
          "ComponentName": "NxLogPaperTrailConfiguration"
        }
      ]
    },
    {
      "ComponentName": "ProcessExplorer",
      "ComponentType": "ZipInstall",
      "Comment": "Maintenance Toolchain - not essential for building firefox",
      "Url": "https://s3.amazonaws.com/windows-opencloudconfig-packages/ProcessExplorer/ProcessExplorer.zip",
      "Destination": "C:\\ProcessExplorer",
      "sha512": "85ffa57d9736ba94bc528ed6e3fccff564b45dfcc5234f8de318f41905ac982fcb39eee3bdb09c3e37f1eb9de72f78312024caa75cc08610421dfeab2a0fb26f"
    },
    {
      "ComponentName": "ProcessMonitor",
      "ComponentType": "ZipInstall",
      "Comment": "Maintenance Toolchain - not essential for building firefox",
      "Url": "https://s3.amazonaws.com/windows-opencloudconfig-packages/ProcessMonitor/ProcessMonitor.zip",
      "Destination": "C:\\ProcessMonitor",
      "sha512": "3db4ad44652c2dbf7bdd03c88339cbd19d672f6363e3a3b6a5a45adbd62c6b4131e491d2fa8f31fb2a60c7555e202c25bc8088d9bdf0896dcb7e3366782e204f"
    },
    {
      "ComponentName": "GpgForWin",
      "ComponentType": "ExeInstall",
      "Comment": "Maintenance Toolchain - not essential for building firefox",
      "Url": "http://files.gpg4win.org/gpg4win-2.3.0.exe",
      "Arguments": [
        "/S"
      ],
      "Validate": {
        "PathsExist": [
          "C:\\Program Files\\GNU\\GnuPG\\pub\\gpg.exe",
          "C:\\Program Files\\GNU\\GnuPG\\pub\\gpg2.exe"
        ],
        "ServiceStatus": [
          {
            "Name": "dirmngr",
            "Status": "running"
          }
        ]
      },
      "sha512": "b1c48d84d041055db3d3e3cbd22ef2f3300728b06c76660b9b78ececf56b7ccbc80addb39a64c0a4eb68bf3463ceb6d254dedda047049ce680e9d543dd8a9af9"
    },
    {
      "ComponentName": "SevenZip",
      "ComponentType": "ExeInstall",
      "Comment": "Maintenance Toolchain - not essential for building firefox",
      "Url": "http://7-zip.org/a/7z1602.exe",
      "Arguments": [
        "/S"
      ],
      "Validate": {
        "PathsExist": [
          "C:\\Program Files\\7-Zip\\7z.exe",
          "C:\\Program Files\\7-Zip\\7z.dll"
        ]
      },
      "sha512": "ad8298ae7d170c9a3e7f66a6098dd017adcd7912ba3938237db88dca141b6606b095a1c7c7fff0a2d4b47405ffbd25d65e5d8d98a55a8abaf3ced12854c18c4c"
    },
    {
      "ComponentName": "SublimeText3",
      "ComponentType": "ExeInstall",
      "Comment": "Maintenance Toolchain - not essential for building firefox",
      "Url": "https://download.sublimetext.com/Sublime%20Text%20Build%203114%20Setup.exe",
      "Arguments": [
        "/VERYSILENT",
        "/NORESTART",
        "/TASKS=\"contextentry\""
      ],
      "Validate": {
        "PathsExist": [
          "C:\\Program Files\\Sublime Text 3\\subl.exe",
          "C:\\Program Files\\Sublime Text 3\\sublime_text.exe"
        ]
      },
      "sha512": "99bb189e112a67358095554711c208fb9ec1bd35d3a333c0f4a157f1715bd0b852140231ab41fc161c262531340f954ccb8bfe792a35849f73596aa757ef3249"
    },
    {
      "ComponentName": "SublimeText3_PackagesFolder",
      "ComponentType": "DirectoryCreate",
      "Comment": "Maintenance Toolchain - not essential for building firefox",
      "Path": "C:\\Users\\Administrator\\AppData\\Roaming\\Sublime Text 3\\Packages"
    },
    {
      "ComponentName": "SublimeText3_PackageControl",
      "ComponentType": "FileDownload",
      "Comment": "Maintenance Toolchain - not essential for building firefox",
      "Source": "http://sublime.wbond.net/Package%20Control.sublime-package",
      "Target": "C:\\Users\\Administrator\\AppData\\Roaming\\Sublime Text 3\\Packages\\Package Control.sublime-package",
      "DependsOn": [
        {
          "ComponentType": "ExeInstall",
          "ComponentName": "SublimeText3"
        },
        {
          "ComponentType": "DirectoryCreate",
          "ComponentName": "SublimeText3_PackagesFolder"
        }
      ]
    },
    {
      "ComponentName": "SystemPowerShellProfile",
      "ComponentType": "FileDownload",
      "Comment": "Maintenance Toolchain - not essential for building firefox",
      "Source": "https://raw.githubusercontent.com/mozilla-releng/OpenCloudConfig/master/userdata/Configuration/Microsoft.PowerShell_profile.ps1",
      "Target": "C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\Microsoft.PowerShell_profile.ps1"
    },
    {
      "ComponentName": "FsutilDisable8Dot3",
      "ComponentType": "CommandRun",
      "Comment": "Maintenance Toolchain - not essential for building firefox",
      "Command": "fsutil.exe",
      "Arguments": [
        "behavior",
        "set",
        "disable8dot3",
        "1"
      ],
      "Validate": {
        "CommandsReturn": [
          {
            "Command": "fsutil.exe",
            "Arguments": [
              "behavior",
              "query",
              "disable8dot3"
            ],
            "Match": "The registry state is: 1 (Disable 8dot3 name creation on all volumes)."
          }
        ]
      }
    },
    {
      "ComponentName": "FsutilDisableLastAccess",
      "ComponentType": "CommandRun",
      "Comment": "Maintenance Toolchain - not essential for building firefox",
      "Command": "fsutil.exe",
      "Arguments": [
        "behavior",
        "set",
        "disablelastaccess",
        "1"
      ],
      "Validate": {
        "CommandsReturn": [
          {
            "Command": "fsutil.exe",
            "Arguments": [
              "behavior",
              "query",
              "disablelastaccess"
            ],
            "Match": "DisableLastAccess = 1"
          }
        ]
      }
    },
    {
      "ComponentName": "home",
      "ComponentType": "SymbolicLink",
      "Comment": "Maintenance Toolchain - not essential for building firefox",
      "Target": "C:\\Users",
      "Link": "C:\\home"
    },
    {
      "ComponentName": "MozillaBuildSetup",
      "ComponentType": "ExeInstall",
      "Comment": "Base Firefox on Windows build requirement",
      "Arguments": [
        "/S",
        "/D=C:\\mozilla-build"
      ],
      "Url": "http://ftp.mozilla.org/pub/mozilla/libraries/win32/MozillaBuildSetup-2.2.0.exe",
      "Validate": {
        "PathsExist": [
          "C:\\mozilla-build\\info-zip\\unzip.exe",
          "C:\\mozilla-build\\info-zip\\zip.exe",
          "C:\\mozilla-build\\msys\\bin\\sh.exe",
          "C:\\mozilla-build\\msys\\local\\bin\\make.exe",
          "C:\\mozilla-build\\msys\\local\\bin\\autoconf-2.13",
          "C:\\mozilla-build\\python\\python.exe",
          "C:\\mozilla-build\\upx391w\\upx.exe",
          "C:\\mozilla-build\\yasm\\yasm.exe"
        ],
        "FilesContain": [
          {
            "Path": "C:\\mozilla-build\\VERSION",
            "Match": "2.2.0"
          }
        ]
      },
      "sha512": "b593aa4ed9ff34bd4a20860fec478b3638ff1f916a60dc79ebcff46cee279fdb59dd53a36579378f0e11f4be201114578a429bfbfc11eda195a0b1db7aa9831e"
    },
    {
      "ComponentName": "msys_home",
      "ComponentType": "SymbolicLink",
      "Comment": "Maintenance Toolchain - not essential for building firefox",
      "Target": "C:\\Users",
      "Link": "C:\\mozilla-build\\msys\\home",
      "DependsOn": [
        {
          "ComponentType": "ExeInstall",
          "ComponentName": "MozillaBuildSetup"
        }
      ]
    },
    {
      "ComponentName": "reg_PythonInstallPath",
      "ComponentType": "RegistryValueSet",
      "Comment": "",
      "Key": "HKEY_LOCAL_MACHINE\\SOFTWARE\\Python\\PythonCore\\2.7\\InstallPath",
      "ValueName": "(Default)",
      "ValueType": "String",
      "ValueData": "C:\\mozilla-build\\python",
      "Hex": false,
      "DependsOn": [
        {
          "ComponentType": "ExeInstall",
          "ComponentName": "MozillaBuildSetup"
        }
      ]
    },
    {
      "ComponentName": "reg_PythonPath",
      "ComponentType": "RegistryValueSet",
      "Comment": "",
      "Key": "HKEY_LOCAL_MACHINE\\SOFTWARE\\Python\\PythonCore\\2.7\\PythonPath",
      "ValueName": "(Default)",
      "ValueType": "String",
      "ValueData": "C:\\mozilla-build\\python\\Lib;C:\\mozilla-build\\python\\DLLs;C:\\mozilla-build\\python\\Lib\\lib-tk",
      "Hex": false,
      "DependsOn": [
        {
          "ComponentType": "ExeInstall",
          "ComponentName": "MozillaBuildSetup"
        }
      ]
    },
    {
      "ComponentName": "python_3_7_3_win32_core",
      "ComponentType": "MsiInstall",
      "Url": "https://www.python.org/ftp/python/3.7.3/win32/core.msi",
      "Name": "Python 3.7.3 Core Interpreter (32-bit)",
      "ProductId": "33AB9CEA-621E-4064-9FB0-7048E79DB5B5",
      "Arguments": "InstallAllUsers=1 TargetDir=C:\\mozilla-build\\python3",
      "sha512": "ca302c7a272371e4a9f504c238ad42d63133f23f7f19679067047183d2ab3716579f22d9525d23b48216d3ebdf07562ced65f2cc2abcc8a35f1278f8400a342a"
    },
    {
      "ComponentName": "python_3_7_3_win32_core_d",
      "ComponentType": "MsiInstall",
      "Url": "https://www.python.org/ftp/python/3.7.3/win32/core_d.msi",
      "Name": "Python 3.7.3 Core Interpreter (32-bit debug)",
      "ProductId": "781EB95F-B4AF-40FA-9F54-00F94309BDE1",
      "Arguments": "InstallAllUsers=1 TargetDir=C:\\mozilla-build\\python3",
      "sha512": "da79add5628f4062c5a7928268bff7de4fd3b1e52a63af0a4d0a607b53428ddc08e3a9a26f6171d52dc6cc4dea073bdabbf55a4e20a6b1ebd0c1f8e4a08ab352"
    },
    {
      "ComponentName": "python_3_7_3_win32_core_pdb",
      "ComponentType": "MsiInstall",
      "Url": "https://www.python.org/ftp/python/3.7.3/win32/core_pdb.msi",
      "Name": "Python 3.7.3 Core Interpreter (32-bit symbols)",
      "ProductId": "4953149C-FF53-47F0-AE87-BA0D10C5042F",
      "Arguments": "InstallAllUsers=1 TargetDir=C:\\mozilla-build\\python3",
      "sha512": "ff322af7cf75a33812244e81239e0cbd2359c5f8e27e91215e504f494f70bd0a5949dddbb989d2a39dc768a87974f10a3f3a8aaad4d2a16d0910139e7182632b"
    },
    {
      "ComponentName": "python_3_7_3_win32_dev",
      "ComponentType": "MsiInstall",
      "Url": "https://www.python.org/ftp/python/3.7.3/win32/dev.msi",
      "Name": "Python 3.7.3 Development Libraries (32-bit)",
      "ProductId": "52DDE5D8-B45C-4C1D-81DD-D72317DE8B08",
      "Arguments": "InstallAllUsers=1 TargetDir=C:\\mozilla-build\\python3",
      "sha512": "bd6c987cdfe4f97250a14330a3f77f0d4971ff87eb2650b653ddaa1714d3382d937f9cf33c1b9af1a0cbe4ac69ea17701789dcd1ee513f24c6a4553b42ba06bf"
    },
    {
      "ComponentName": "python_3_7_3_win32_dev_d",
      "ComponentType": "MsiInstall",
      "Url": "https://www.python.org/ftp/python/3.7.3/win32/dev_d.msi",
      "Name": "Python 3.7.3 Development Libraries (32-bit debug)",
      "ProductId": "5F6E2AD7-0231-4C17-B7CA-208BDD81E14B",
      "Arguments": "InstallAllUsers=1 TargetDir=C:\\mozilla-build\\python3",
      "sha512": "5f14fc1a71a6496e1016ed1b989b516e8b32f96e86982863d00d7b0ccc85a2dea47be4e887a6cb937ba33bf572f8aed5c8bd74e668d82d3a8cb8aedc8383631d"
    },
    {
      "ComponentName": "python_3_7_3_win32_doc",
      "ComponentType": "MsiInstall",
      "Url": "https://www.python.org/ftp/python/3.7.3/win32/doc.msi",
      "Name": "Python 3.7.3 Documentation (32-bit)",
      "ProductId": "2BC067C0-B392-49C0-988B-C839C62D8B65",
      "Arguments": "InstallAllUsers=1 TargetDir=C:\\mozilla-build\\python3",
      "sha512": "34cbb471a1278d1370c85e6d796cbb8b6d44f78b49db50791a61270f1b9c68f62e886a91ca1878af5bc896daafe07489fdd7be51ed3bd8cea9f4796549fbf356"
    },
    {
      "ComponentName": "python_3_7_3_win32_exe",
      "ComponentType": "MsiInstall",
      "Url": "https://www.python.org/ftp/python/3.7.3/win32/exe.msi",
      "Name": "Python 3.7.3 Executables (32-bit)",
      "ProductId": "E3E61712-C062-45E7-8348-D7DBF66FACFD",
      "Arguments": "InstallAllUsers=1 TargetDir=C:\\mozilla-build\\python3",
      "sha512": "6c0622940c7774f2527ad3b61fa41f6f32d77cabc646df2648eec14b7ace52bd6f25a39f9f06d7bced34c90f51c337b83d97bb81e9072b1e4379d5f19900f5cd"
    },
    {
      "ComponentName": "python_3_7_3_win32_exe_d",
      "ComponentType": "MsiInstall",
      "Url": "https://www.python.org/ftp/python/3.7.3/win32/exe_d.msi",
      "Name": "Python 3.7.3 Executables (32-bit debug)",
      "ProductId": "A37BCC61-603A-461B-AB57-A69245AA845C",
      "Arguments": "InstallAllUsers=1 TargetDir=C:\\mozilla-build\\python3",
      "sha512": "f13548f9b918314e7aeaa51660a1f88b9c268a6af5a5844e67e6570b4f21d2de3562a462f1ad03505e4c6e8bca3bb9ab9b1e183f2ef7a7970dc7fa03efa4ec66"
    },
    {
      "ComponentName": "python_3_7_3_win32_exe_pdb",
      "ComponentType": "MsiInstall",
      "Url": "https://www.python.org/ftp/python/3.7.3/win32/exe_pdb.msi",
      "Name": "Python 3.7.3 Executables (32-bit symbols)",
      "ProductId": "E354575A-53D7-4BC2-8192-FC61BF4D8869",
      "Arguments": "InstallAllUsers=1 TargetDir=C:\\mozilla-build\\python3",
      "sha512": "705bff84fa579e24c5c4de92925789c49855e55c424dc963c990b715007eb4640fae14a6c447b4b5a48dbd0bb3a6bafdc9a6dec2cf2b89c1ebd52d555b9787ee"
    },
    {
      "ComponentName": "python_3_7_3_win32_launcher",
      "ComponentType": "MsiInstall",
      "Url": "https://www.python.org/ftp/python/3.7.3/win32/launcher.msi",
      "Name": "Python Launcher",
      "ProductId": "A28C27E4-A725-482A-9C65-61EDC0E4D583",
      "Arguments": "InstallAllUsers=1 TargetDir=C:\\mozilla-build\\python3",
      "sha512": "b7374b675ee61c53569e556a3b20ea7190d14810f23fa645a035ee6a7b7a6c2fcdbffab255d167bd5650cad735e4470d2764782ce812cf1eba09f35b059a6358"
    },
    {
      "ComponentName": "python_3_7_3_win32_lib",
      "ComponentType": "MsiInstall",
      "Url": "https://www.python.org/ftp/python/3.7.3/win32/lib.msi",
      "Name": "Python 3.7.3 Standard Library (32-bit)",
      "ProductId": "DC6190E7-D05E-465A-9FB6-7418BC901991",
      "Arguments": "InstallAllUsers=1 TargetDir=C:\\mozilla-build\\python3",
      "sha512": "9ab3714ace50f87ca760ce31ccbcbab24004118f8dfda2c1395b6aac7703a6b9b208c830d85362e4029421faaf3525f7b56cb2cb248cea0650cd22426d7b7f6d"
    },
    {
      "ComponentName": "python_3_7_3_win32_lib_d",
      "ComponentType": "MsiInstall",
      "Url": "https://www.python.org/ftp/python/3.7.3/win32/lib_d.msi",
      "Name": "Python 3.7.3 Standard Library (32-bit debug)",
      "ProductId": "8C9C7C76-D74A-4DD1-ABC4-77861CD51331",
      "Arguments": "InstallAllUsers=1 TargetDir=C:\\mozilla-build\\python3",
      "sha512": "3f276d6b270b3ecdf3a2741fa8704bec6a8a884eb42624220c557692bce0f0ea76f007234e213071a196d34070bcb6fb2061e7b0536b8321db6c25f887d12631"
    },
    {
      "ComponentName": "python_3_7_3_win32_lib_pdb",
      "ComponentType": "MsiInstall",
      "Url": "https://www.python.org/ftp/python/3.7.3/win32/lib_pdb.msi",
      "Name": "Python 3.7.3 Standard Library (32-bit symbols)",
      "ProductId": "433F0D39-FE8E-4183-B032-D99E33ADB098",
      "Arguments": "InstallAllUsers=1 TargetDir=C:\\mozilla-build\\python3",
      "sha512": "e54dc2f9bd85b857157d4259eb989bc4a8ae99252128964b53f29ce628d6f0bd9fdf310f75c7346c306e5d5e3edbfda92e438dd05b409eddc0f3ee140afd1a67"
    },
    {
      "ComponentName": "python_3_7_3_win32_path",
      "ComponentType": "MsiInstall",
      "Url": "https://www.python.org/ftp/python/3.7.3/win32/path.msi",
      "Name": "Python 3.7.3 Add to Path (32-bit)",
      "ProductId": "2DB1318D-E51C-419B-99D5-D15F7120BD09",
      "Arguments": "InstallAllUsers=1 TargetDir=C:\\mozilla-build\\python3",
      "sha512": "00897709f7e5095885169431f74316541f39665024d238fe1f5b97dd1a02f2be0405c5bd5fc65766e83e8bb328b3b02dfc744a9ea668485764411023a5c28a45"
    },
    {
      "ComponentName": "python_3_7_3_win32_pip",
      "ComponentType": "MsiInstall",
      "Url": "https://www.python.org/ftp/python/3.7.3/win32/pip.msi",
      "Name": "Python 3.7.3 pip Bootstrap (32-bit)",
      "ProductId": "9846DC93-4A39-496F-8AE3-0E3AB4EF4385",
      "Arguments": "InstallAllUsers=1 TargetDir=C:\\mozilla-build\\python3",
      "sha512": "b22a5882a51102b5e524374e8f0ef84488b44dc52968a89a6ad295e39647622e665ae3f8b8869b29e2c48c61257ef39b3b523fe7cff195b1700accf7a5104d11"
    },
    {
      "ComponentName": "python_3_7_3_win32_tcltk",
      "ComponentType": "MsiInstall",
      "Url": "https://www.python.org/ftp/python/3.7.3/win32/tcltk.msi",
      "Name": "Python 3.7.3 Tcl/Tk Support (32-bit)",
      "ProductId": "1341418F-C713-4943-ACB2-9F4D4743D193",
      "Arguments": "InstallAllUsers=1 TargetDir=C:\\mozilla-build\\python3",
      "sha512": "fec31b3ebc070e3d334d882bf010795173a0fa3d7fc4178c94aa5eee5ddad6d8cce66e0c07ba50c183760280f969063f6dd120ebc8c2970e61b12c8acc0e739c"
    },
    {
      "ComponentName": "python_3_7_3_win32_tcltk_d",
      "ComponentType": "MsiInstall",
      "Url": "https://www.python.org/ftp/python/3.7.3/win32/tcltk_d.msi",
      "Name": "Python 3.7.3 Tcl/Tk Support (32-bit debug)",
      "ProductId": "9F10336E-63ED-4379-84A9-C49F608CB052",
      "Arguments": "InstallAllUsers=1 TargetDir=C:\\mozilla-build\\python3",
      "sha512": "882d87ee7459d62580f237d73d10ea4bcf1e68a4a463ceb5dca70e0b8d51e9d12f2c5ef3c10745442dc4599d5a0a05b898779d72f0ec49baec9b01769eba80bf"
    },
    {
      "ComponentName": "python_3_7_3_win32_tcltk_pdb",
      "ComponentType": "MsiInstall",
      "Url": "https://www.python.org/ftp/python/3.7.3/win32/tcltk_pdb.msi",
      "Name": "Python 3.7.3 Tcl/Tk Support (32-bit symbols)",
      "ProductId": "FCF5A835-ADE6-4AE2-B33F-A38C32FCCED8",
      "Arguments": "InstallAllUsers=1 TargetDir=C:\\mozilla-build\\python3",
      "sha512": "a1094b0d4beb1732b58cf84ea1870a0d4e1bcbd88746f4f5ed9a6eaacb5716d39253b8dadeb6bd126b41df6331bfa1d00ce68238d2200f5b0d45c88dcef98015"
    },
    {
      "ComponentName": "python_3_7_3_win32_test",
      "ComponentType": "MsiInstall",
      "Url": "https://www.python.org/ftp/python/3.7.3/win32/test.msi",
      "Name": "Python 3.7.3 Test Suite (32-bit)",
      "ProductId": "FE5E4BF9-7487-4CE8-A2AC-F78C6B4BE487",
      "Arguments": "InstallAllUsers=1 TargetDir=C:\\mozilla-build\\python3",
      "sha512": "24bb8ebadf0d336533f14cb75b014851dc33ab7db93b810810760d4711c9bee60e5634732dbe2044d2fe1ac1ef87e2030d62044fe2fee695315ff29a3ff119a2"
    },
    {
      "ComponentName": "python_3_7_3_win32_test_d",
      "ComponentType": "MsiInstall",
      "Url": "https://www.python.org/ftp/python/3.7.3/win32/test_d.msi",
      "Name": "Python 3.7.3 Test Suite (32-bit debug)",
      "ProductId": "5070E86E-3458-4639-81F3-7822D37BC5C8",
      "Arguments": "InstallAllUsers=1 TargetDir=C:\\mozilla-build\\python3",
      "sha512": "8bddb91560079a870bf7dfa9b111521bb317f3f99b722d75c48aa12bc4fe6cf98066e8a2927884d8da4088be14b055cb2ee3b868bb561a5dc1f2ec9c587a6fa0"
    },
    {
      "ComponentName": "python_3_7_3_win32_test_pdb",
      "ComponentType": "MsiInstall",
      "Url": "https://www.python.org/ftp/python/3.7.3/win32/test_pdb.msi",
      "Name": "Python 3.7.3 Test Suite (32-bit symbols)",
      "ProductId": "30FD277B-26A7-4879-B6C0-CEFD3F719835",
      "Arguments": "InstallAllUsers=1 TargetDir=C:\\mozilla-build\\python3",
      "sha512": "d562ae6b1b7f10c2d8c20afff4512a4b926cbc5905c56dbc4f289f6cc65574a7763600fd8124246536f31d212f2681d3f1e96bc978faec0f4e748556c6a0cfea"
    },
    {
      "ComponentName": "python_3_7_3_win32_tools",
      "ComponentType": "MsiInstall",
      "Url": "https://www.python.org/ftp/python/3.7.3/win32/tools.msi",
      "Name": "Python 3.7.3 Utility Scripts (32-bit)",
      "ProductId": "AE9303AD-EBD0-4C85-A9D0-55B1BA972D11",
      "Arguments": "InstallAllUsers=1 TargetDir=C:\\mozilla-build\\python3",
      "sha512": "8ea36980ba76714d005143aa7496aa6b6d4496907d10410ebb0e49ae1ca1b5107fa91c3ed7c73ba11f0ea62a3d41729550a7efd182e6a8c1301fccd5e3ee4085"
    },
    {
      "ComponentName": "python_3_7_3_win32_ucrt",
      "ComponentType": "MsiInstall",
      "Url": "https://www.python.org/ftp/python/3.7.3/win32/ucrt.msi",
      "Name": "Python 3.7.3 C Runtime Library (32-bit)",
      "ProductId": "3518E76D-1BC1-4540-9EB7-2B699EF97463",
      "Arguments": "InstallAllUsers=1 TargetDir=C:\\mozilla-build\\python3",
      "sha512": "3a0f2595bc7f486432208328e56fb56b4c1dd4ee73979546f761176e8aac72641a5142dfb11599a6dbad1917be19c4422f9795fe7986eadd8b96eeea0d1a4071"
    },
    {
      "ComponentName": "Python3",
      "ComponentType": "SymbolicLink",
      "Comment": "https://bugzilla.mozilla.org/show_bug.cgi?id=1545339",
      "Target": "C:\\mozilla-build\\python3\\python.exe",
      "Link": "C:\\mozilla-build\\python3\\python3.exe"
    },
    {
      "ComponentName": "DeleteMozillaBuildMercurial",
      "ComponentType": "CommandRun",
      "DependsOn": [
        {
          "ComponentType": "ExeInstall",
          "ComponentName": "MozillaBuildSetup"
        }
      ],
      "Command": "cmd.exe",
      "Arguments": [
        "/c",
        "del",
        "C:\\mozilla-build\\python\\Scripts\\hg*"
      ],
      "Validate": {
        "PathsNotExist": [
          "C:\\mozilla-build\\python\\hg",
          "C:\\mozilla-build\\python\\hg.exe"
        ]
      }
    },
    {
      "ComponentName": "Mercurial",
      "ComponentType": "MsiInstall",
      "Comment": "https://bugzilla.mozilla.org/show_bug.cgi?id=1738924",
      "Url": "https://www.mercurial-scm.org/release/windows/mercurial-5.9.3-x86.msi",
      "Name": "Mercurial 5.9.3 (x86)",
      "ProductId": "68599CFD-1293-4ECA-A7F5-1EFA6B72608C",
      "sha512": "20c2adbbb86abdae055772b13c4c927471b6be548baa67657c0f4d5bfd99a95646f68664c8031fb7cf736f1d59562b434d0850fb95272bff00a3f6a47b28bd6e"
    },
    {
      "ComponentName": "MercurialConfig",
      "ComponentType": "ChecksumFileDownload",
      "Comment": "Required by clonebundle and share hg extensions",
      "DependsOn": [
        {
          "ComponentType": "MsiInstall",
          "ComponentName": "Mercurial"
        }
      ],
      "Source": "https://raw.githubusercontent.com/mozilla-releng/OpenCloudConfig/master/userdata/Configuration/Mercurial/mercurial.ini",
      "Target": "C:\\Program Files\\Mercurial\\Mercurial.ini"
    },
    {
      "ComponentName": "robustcheckout",
      "ComponentType": "ChecksumFileDownload",
      "Comment": "Required by robustcheckout hg extension",
      "DependsOn": [
        {
          "ComponentType": "ExeInstall",
          "ComponentName": "MozillaBuildSetup"
        }
      ],
      "Source": "https://raw.githubusercontent.com/mozilla-releng/OpenCloudConfig/master/userdata/Configuration/FirefoxBuildResources/robustcheckout.py",
      "Target": "C:\\mozilla-build\\robustcheckout.py"
    },
    {
      "ComponentName": "MercurialCerts",
      "ComponentType": "ChecksumFileDownload",
      "DependsOn": [
        {
          "ComponentType": "MsiInstall",
          "ComponentName": "Mercurial"
        }
      ],
      "Source": "https://raw.githubusercontent.com/mozilla-releng/OpenCloudConfig/master/userdata/Configuration/Mercurial/cacert.pem",
      "Target": "C:\\mozilla-build\\msys\\etc\\cacert.pem"
    },
    {
      "ComponentName": "env_MOZILLABUILD",
      "ComponentType": "EnvironmentVariableSet",
      "Comment": "Absolutely required for mozharness builds. Python will fall in a heap, throwing misleading exceptions without this. :)",
      "DependsOn": [
        {
          "ComponentType": "ExeInstall",
          "ComponentName": "MozillaBuildSetup"
        }
      ],
      "Name": "MOZILLABUILD",
      "Value": "C:\\mozilla-build",
      "Target": "Machine"
    },
    {
      "ComponentName": "env_PATH",
      "ComponentType": "EnvironmentVariableUniqueAppend",
      "DependsOn": [
        {
          "ComponentType": "ExeInstall",
          "ComponentName": "MozillaBuildSetup"
        },
        {
          "ComponentType": "MsiInstall",
          "ComponentName": "Mercurial"
        },
        {
          "ComponentType": "MsiInstall",
          "ComponentName": "python_3_7_3_win32_exe"
        }
      ],
      "Name": "PATH",
      "Values": [
        "C:\\Program Files\\Mercurial",
        "C:\\mozilla-build\\7zip",
        "C:\\mozilla-build\\info-zip",
        "C:\\mozilla-build\\kdiff3",
        "C:\\mozilla-build\\moztools-x64\\bin",
        "C:\\mozilla-build\\mozmake",
        "C:\\mozilla-build\\msys\\bin",
        "C:\\mozilla-build\\msys\\local\\bin",
        "C:\\mozilla-build\\nsis-3.0b3",
        "C:\\mozilla-build\\nsis-2.46u",
        "C:\\mozilla-build\\python",
        "C:\\mozilla-build\\python\\Scripts",
        "C:\\mozilla-build\\python3",
        "C:\\mozilla-build\\upx391w",
        "C:\\mozilla-build\\wget",
        "C:\\mozilla-build\\yasm",
        "C:\\Program Files\\Microsoft Windows Performance Toolkit"
      ],
      "Target": "Machine"
    },
    {
      "ComponentName": "pip3_upgrade_pip",
      "ComponentType": "CommandRun",
      "DependsOn": [
        {
          "ComponentType": "MsiInstall",
          "ComponentName": "python_3_7_3_win32_pip"
        }
      ],
      "Command": "C:\\mozilla-build\\python3\\python3.exe",
      "Arguments": [
        "-m",
        "pip",
        "install",
        "--upgrade",
        "pip==21.0.1"
      ],
      "Validate": {
        "CommandsReturn": [
          {
            "Command": "C:\\mozilla-build\\python3\\python3.exe",
            "Arguments": [
              "-m",
              "pip",
              "show",
              "pip"
            ],
            "Match": "Version: 21.0.1"
          }
        ]
      }
    },
    {
      "ComponentName": "pip3_upgrade_zstandard",
      "ComponentType": "CommandRun",
      "DependsOn": [
        {
          "ComponentType": "CommandRun",
          "ComponentName": "pip3_upgrade_pip"
        }
      ],
      "Command": "C:\\mozilla-build\\python3\\python3.exe",
      "Arguments": [
        "-m",
        "pip",
        "install",
        "--upgrade",
        "zstandard==0.11.1"
      ],
      "Validate": {
        "CommandsReturn": [
          {
            "Command": "C:\\mozilla-build\\python3\\python3.exe",
            "Arguments": [
              "-m",
              "pip",
              "show",
              "zstandard"
            ],
            "Match": "Version: 0.11.1"
          }
        ]
      }
    },
    {
      "ComponentName": "pip3_upgrade_certifi",
      "ComponentType": "CommandRun",
      "DependsOn": [
        {
          "ComponentType": "CommandRun",
          "ComponentName": "pip3_upgrade_pip"
        }
      ],
      "Command": "C:\\mozilla-build\\python3\\python3.exe",
      "Arguments": [
        "-m",
        "pip",
        "install",
        "--upgrade",
        "certifi"
      ]
    },
    {
      "ComponentName": "ToolToolInstall",
      "ComponentType": "FileDownload",
      "DependsOn": [
        {
          "ComponentType": "ExeInstall",
          "ComponentName": "MozillaBuildSetup"
        }
      ],
      "Source": "https://raw.githubusercontent.com/mozilla-releng/tooltool/master/client/tooltool.py",
      "Target": "C:\\mozilla-build\\tooltool.py"
    },
    {
      "ComponentName": "reg_WindowsErrorReportingLocalDumps",
      "ComponentType": "RegistryKeySet",
      "Comment": "https://bugzilla.mozilla.org/show_bug.cgi?id=1261812",
      "Key": "HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\Windows Error Reporting",
      "ValueName": "LocalDumps"
    },
    {
      "ComponentName": "DumpFolder",
      "ComponentType": "DirectoryCreate",
      "Comment": "https://bugzilla.mozilla.org/show_bug.cgi?id=1694584",
      "ValueData": "z:\\error-dumps"
    },
    {
      "ComponentName": "reg_WindowsErrorReportingLocalDumpsDumpFolder",
      "ComponentType": "RegistryValueSet",
      "Comment": "https://bugzilla.mozilla.org/show_bug.cgi?id=1694584",
      "Key": "HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\Windows Error Reporting\\LocalDumps",
      "ValueName": "DumpFolder",
      "ValueType": "String",
      "ValueData": "z:\\error-dumps",
      "DependsOn": [
        {
          "ComponentType": "DirectoryCreate",
          "ComponentName": "DumpFolder"
        }
      ]
    },
    {
      "ComponentName": "reg_WindowsErrorReportingDontShowUI",
      "ComponentType": "RegistryValueSet",
      "Comment": "https://bugzilla.mozilla.org/show_bug.cgi?id=1261812",
      "Key": "HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\Windows Error Reporting",
      "ValueName": "DontShowUI",
      "ValueType": "Dword",
      "ValueData": "0x00000001",
      "Hex": true
    },
    {
      "ComponentName": "GenericWorkerDirectory",
      "ComponentType": "DirectoryCreate",
      "Path": "C:\\generic-worker"
    },
    {
      "ComponentName": "GenericWorkerDownload",
      "ComponentType": "ChecksumFileDownload",
      "DependsOn": [
        {
          "ComponentType": "DirectoryCreate",
          "ComponentName": "GenericWorkerDirectory"
        }
      ],
      "Source": "https://github.com/taskcluster/generic-worker/releases/download/v16.5.1/generic-worker-multiuser-windows-386.exe",
      "Target": "C:\\generic-worker\\generic-worker.exe",
      "sha512": "47188fff3177ce7addc2b28850062bfb4aa9ed3d759819ff79c8bbb6384456aa5a3bca2dbeb66af826af6eec66946df0d55c80e142e08aae76ad872ea9aa0aed"
    },
    {
      "ComponentName": "LiveLogDownload",
      "ComponentType": "ChecksumFileDownload",
      "DependsOn": [
        {
          "ComponentType": "DirectoryCreate",
          "ComponentName": "GenericWorkerDirectory"
        }
      ],
      "Source": "https://github.com/taskcluster/livelog/releases/download/v1.1.0/livelog-windows-386.exe",
      "Target": "C:\\generic-worker\\livelog.exe",
      "sha512": "34cdece120f03e3f6b0ae2576d846c3fc38385fc976a5f20d60a50871e1519fc8a938355a607f6a5a4c658c838089571c435f01731d10600513ea63b3b1be01c"
    },
    {
      "ComponentName": "TaskClusterProxyDownload",
      "ComponentType": "FileDownload",
      "DependsOn": [
        {
          "ComponentType": "DirectoryCreate",
          "ComponentName": "GenericWorkerDirectory"
        }
      ],
      "Source": "https://github.com/taskcluster/taskcluster-proxy/releases/download/v5.1.0/taskcluster-proxy-windows-386.exe",
      "Target": "C:\\generic-worker\\taskcluster-proxy.exe",
      "sha512": "83ec125f0fa8b8989e28cefa3b35c560556bf518c446f406a6320f758f6aaecac8b9e43a234cb1f2bdeb8d5126d68182aecfb2824b22668f3119812e2f587b25"
    },
    {
      "ComponentName": "NSSMDownload",
      "ComponentType": "FileDownload",
      "Source": "https://nssm.cc/ci/nssm-2.24-103-gdee49fc.zip",
      "sha512": "05835a8b28fc3d8573c8fc6b627c885990468e29144d5523ce2c065835ff3f9341ced5e15fa246ab7af36cadfa0e96be854b9fafa24ab47cd11319d8a873681b",
      "Target": "C:\\Windows\\Temp\\NSSMInstall.zip"
    },
    {
      "ComponentName": "NSSMInstall",
      "ComponentType": "CommandRun",
      "Comment": "NSSM is required to install Generic Worker as a service. Currently ZipInstall fails, so using 7z instead.",
      "Command": "C:\\Program Files\\7-Zip\\7z.exe",
      "Arguments": [
        "x",
        "-oC:\\",
        "C:\\Windows\\Temp\\NSSMInstall.zip"
      ],
      "DependsOn": [
        {
          "ComponentType": "ExeInstall",
          "ComponentName": "SevenZip"
        },
        {
          "ComponentType": "FileDownload",
          "ComponentName": "NSSMDownload"
        }
      ],
      "Validate": {
        "PathsExist": [
          "C:\\nssm-2.24-103-gdee49fc\\win32\\nssm.exe"
        ]
      }
    },
    {
      "ComponentName": "GenericWorkerInstall",
      "ComponentType": "CommandRun",
      "Command": "C:\\generic-worker\\generic-worker.exe",
      "Arguments": [
        "install",
        "service",
        "--nssm",
        "C:\\nssm-2.24-103-gdee49fc\\win32\\nssm.exe",
        "--config",
        "C:\\generic-worker\\generic-worker.config",
        "--configure-for-aws"
      ],
      "DependsOn": [
        {
          "ComponentType": "ChecksumFileDownload",
          "ComponentName": "GenericWorkerDownload"
        },
        {
          "ComponentType": "ChecksumFileDownload",
          "ComponentName": "LiveLogDownload"
        },
        {
          "ComponentType": "CommandRun",
          "ComponentName": "NSSMInstall"
        }
      ],
      "Validate": {
        "PathsExist": [
          "C:\\generic-worker\\run-generic-worker.bat",
          "C:\\generic-worker\\generic-worker.exe"
        ],
        "CommandsReturn": [
          {
            "Command": "C:\\generic-worker\\generic-worker.exe",
            "Arguments": [
              "--version"
            ],
            "Like": "generic-worker (multiuser engine) 16.5.1 *"
          }
        ]
      }
    },
    {
      "ComponentName": "DisableDesktopInterrupt",
      "ComponentType": "ChecksumFileDownload",
      "DependsOn": [
        {
          "ComponentType": "CommandRun",
          "ComponentName": "GenericWorkerInstall"
        }
      ],
      "Source": "https://raw.githubusercontent.com/mozilla-releng/OpenCloudConfig/master/userdata/Configuration/GenericWorker/disable-desktop-interrupt.reg",
      "Target": "C:\\generic-worker\\disable-desktop-interrupt.reg"
    },
    {
      "ComponentName": "GenericWorkerStateWait",
      "ComponentType": "ChecksumFileDownload",
      "DependsOn": [
        {
          "ComponentType": "CommandRun",
          "ComponentName": "GenericWorkerInstall"
        },
        {
          "ComponentType": "ChecksumFileDownload",
          "ComponentName": "DisableDesktopInterrupt"
        }
      ],
      "Source": "https://raw.githubusercontent.com/mozilla-releng/OpenCloudConfig/master/userdata/Configuration/GenericWorker/run-generic-worker-and-reboot.bat",
      "Target": "C:\\generic-worker\\run-generic-worker.bat"
    },
    {
      "ComponentName": "TaskUserInitScript",
      "ComponentType": "ChecksumFileDownload",
      "Comment": "https://bugzilla.mozilla.org/show_bug.cgi?id=1433851#c19",
      "Source": "https://raw.githubusercontent.com/mozilla-releng/OpenCloudConfig/master/userdata/Configuration/GenericWorker/task-user-init-win7.cmd",
      "Target": "C:\\generic-worker\\task-user-init.cmd",
      "DependsOn": [
        {
          "ComponentType": "DirectoryCreate",
          "ComponentName": "GenericWorkerDirectory"
        }
      ]
    },
    {
      "ComponentName": "PipConfDirectory",
      "ComponentType": "DirectoryCreate",
      "Comment": "https://pip.pypa.io/en/stable/user_guide/#config-file",
      "Path": "C:\\ProgramData\\pip"
    },
    {
      "ComponentName": "PipConf",
      "ComponentType": "ChecksumFileDownload",
      "DependsOn": [
        {
          "ComponentType": "DirectoryCreate",
          "ComponentName": "PipConfDirectory"
        }
      ],
      "Source": "https://raw.githubusercontent.com/mozilla-releng/OpenCloudConfig/master/userdata/Configuration/pip.conf",
      "Target": "C:\\ProgramData\\pip\\pip.ini"
    },
    {
      "ComponentName": "virtualenv_support",
      "ComponentType": "DirectoryCreate",
      "Path": "C:\\mozilla-build\\python\\Lib\\site-packages\\virtualenv_support",
      "DependsOn": [
        {
          "ComponentType": "ExeInstall",
          "ComponentName": "MozillaBuildSetup"
        }
      ]
    },
    {
      "ComponentName": "virtualenv_support_pywin32",
      "ComponentType": "FileDownload",
      "DependsOn": [
        {
          "ComponentType": "DirectoryCreate",
          "ComponentName": "virtualenv_support"
        }
      ],
      "Source": "https://pypi.python.org/packages/cp27/p/pypiwin32/pypiwin32-219-cp27-none-win32.whl#md5=a8b0c1b608c1afeb18cd38d759ee5e29",
      "Target": "C:\\mozilla-build\\python\\Lib\\site-packages\\virtualenv_support\\pypiwin32-219-cp27-none-win32.whl"
    },
    {
      "ComponentName": "virtualenv_support_pywin32_amd64",
      "ComponentType": "FileDownload",
      "DependsOn": [
        {
          "ComponentType": "DirectoryCreate",
          "ComponentName": "virtualenv_support"
        }
      ],
      "Source": "https://pypi.python.org/packages/cp27/p/pypiwin32/pypiwin32-219-cp27-none-win_amd64.whl#md5=d7bafcf3cce72c3ce9fdd633a262c335",
      "Target": "C:\\mozilla-build\\python\\Lib\\site-packages\\virtualenv_support\\pypiwin32-219-cp27-none-win_amd64.whl"
    },
    {
      "ComponentName": "HgShared",
      "ComponentType": "DirectoryCreate",
      "Comment": "allows builds to use `hg robustcheckout ...`",
      "Path": "y:\\hg-shared"
    },
    {
      "ComponentName": "HgSharedAccessRights",
      "ComponentType": "CommandRun",
      "Comment": "allows builds to use `hg robustcheckout ...`",
      "Command": "icacls.exe",
      "Arguments": [
        "y:\\hg-shared",
        "/grant",
        "Everyone:(OI)(CI)F"
      ],
      "DependsOn": [
        {
          "ComponentType": "DirectoryCreate",
          "ComponentName": "HgShared"
        }
      ]
    },
    {
      "ComponentName": "PipCache",
      "ComponentType": "DirectoryCreate",
      "Comment": "share pip cache across subsequent task users",
      "Path": "y:\\pip-cache"
    },
    {
      "ComponentName": "PipCacheAccessRights",
      "ComponentType": "CommandRun",
      "Comment": "share pip cache across subsequent task users",
      "Command": "icacls.exe",
      "Arguments": [
        "y:\\pip-cache",
        "/grant",
        "Everyone:(OI)(CI)F"
      ],
      "DependsOn": [
        {
          "ComponentType": "DirectoryCreate",
          "ComponentName": "PipCache"
        }
      ]
    },
    {
      "ComponentName": "env_PIP_DOWNLOAD_CACHE",
      "ComponentType": "EnvironmentVariableSet",
      "Comment": "share pip download cache between tasks",
      "DependsOn": [
        {
          "ComponentType": "CommandRun",
          "ComponentName": "PipCacheAccessRights"
        }
      ],
      "Name": "PIP_DOWNLOAD_CACHE",
      "Value": "y:\\pip-cache",
      "Target": "Machine"
    },
    {
      "ComponentName": "TooltoolCache",
      "ComponentType": "DirectoryCreate",
      "Comment": "share tooltool cache across subsequent task users",
      "Path": "y:\\tooltool-cache"
    },
    {
      "ComponentName": "TooltoolCacheAccessRights",
      "ComponentType": "CommandRun",
      "Comment": "share tooltool cache across subsequent task users",
      "Command": "icacls.exe",
      "Arguments": [
        "y:\\tooltool-cache",
        "/grant",
        "Everyone:(OI)(CI)F"
      ],
      "DependsOn": [
        {
          "ComponentType": "DirectoryCreate",
          "ComponentName": "TooltoolCache"
        }
      ]
    },
    {
      "ComponentName": "env_TOOLTOOL_CACHE",
      "ComponentType": "EnvironmentVariableSet",
      "Comment": "share tooltool cache between tasks",
      "DependsOn": [
        {
          "ComponentType": "CommandRun",
          "ComponentName": "TooltoolCacheAccessRights"
        }
      ],
      "Name": "TOOLTOOL_CACHE",
      "Value": "y:\\tooltool-cache",
      "Target": "Machine"
    },
    {
      "ComponentName": "ngen_executeQueuedItems",
      "ComponentType": "CommandRun",
      "Comment": "https://blogs.msdn.microsoft.com/dotnet/2013/08/06/wondering-why-mscorsvw-exe-has-high-cpu-usage-you-can-speed-it-up",
      "Command": "c:\\Windows\\Microsoft.NET\\Framework\\v4.0.30319\\ngen.exe",
      "Arguments": [
        "executeQueuedItems"
      ]
    },
    {
      "ComponentName": "GrantEveryoneSeCreateSymbolicLinkPrivilege",
      "ComponentType": "CommandRun",
      "Comment": "Bug 1316329 - support creation of symlinks by task users",
      "Command": "powershell",
      "Arguments": [
        "-command",
        "\"& {&'Import-Module' Carbon}\";",
        "\"& {&'Grant-CPrivilege' -Identity Everyone -Privilege SeCreateSymbolicLinkPrivilege}\""
      ]
    },
    {
      "ComponentName": "MozillaMaintenanceDir",
      "ComponentType": "DirectoryCreate",
      "Comment": "Working directory for Mozilla Maintenance Service installation",
      "Path": "C:\\dsc\\MozillaMaintenance"
    },
    {
      "ComponentName": "maintenanceservice_installer",
      "ComponentType": "ChecksumFileDownload",
      "Source": "https://github.com/mozilla-releng/OpenCloudConfig/blob/master/userdata/Configuration/Mozilla%20Maintenance%20Service/maintenanceservice_installer.exe?raw=true",
      "Target": "C:\\dsc\\MozillaMaintenance\\maintenanceservice_installer.exe",
      "DependsOn": [
        {
          "ComponentType": "DirectoryCreate",
          "ComponentName": "MozillaMaintenanceDir"
        }
      ],
      "sha512": "4c200d59db17afcaa4deec9f083a75362b8baf0974483cb573b37587d605315513590c076f263f0a5e9165695751a076a839579e169a24507daf4cbc2b30d85e"
    },
    {
      "ComponentName": "maintenanceservice",
      "ComponentType": "ChecksumFileDownload",
      "Source": "https://github.com/mozilla-releng/OpenCloudConfig/blob/master/userdata/Configuration/Mozilla%20Maintenance%20Service/maintenanceservice.exe?raw=true",
      "Target": "C:\\dsc\\MozillaMaintenance\\maintenanceservice.exe",
      "DependsOn": [
        {
          "ComponentType": "DirectoryCreate",
          "ComponentName": "MozillaMaintenanceDir"
        }
      ],
      "sha512": "8ef24f6abeb4a0929c0a112788fd55881d6abdc3474bd825e905981e4993ec345d1afd6636f07aa55275a24463c5fbf85d00d35446703dd4d73c92e28415ca5f"
    },
    {
      "ComponentName": "maintenanceservice_install",
      "ComponentType": "CommandRun",
      "Command": "C:\\dsc\\MozillaMaintenance\\maintenanceservice_installer.exe",
      "Arguments": [
        "/s"
      ],
      "DependsOn": [
        {
          "ComponentType": "ChecksumFileDownload",
          "ComponentName": "maintenanceservice_installer"
        },
        {
          "ComponentType": "ChecksumFileDownload",
          "ComponentName": "maintenanceservice"
        }
      ],
      "Validate": {
        "PathsExist": [
          "C:\\Program Files\\Mozilla Maintenance Service\\maintenanceservice.exe",
          "C:\\Program Files\\Mozilla Maintenance Service\\Uninstall.exe"
        ]
      }
    },
    {
      "ComponentName": "MaintenanceServiceAcessRights",
      "ComponentType": "CommandRun",
      "Comment": "See https://bugzilla.mozilla.org/show_bug.cgi?id=1067756#c21",
      "Command": "icacls.exe",
      "Arguments": [
        "\"C:\\Program Files\\Mozilla Maintenance Service\"",
        "/grant",
        "Everyone:(OI)(CI)F"
      ],
      "DependsOn": [
        {
          "ComponentType": "CommandRun",
          "ComponentName": "maintenanceservice_install"
        }
      ]
    },
    {
      "ComponentName": "MozFakeCA_cer",
      "ComponentType": "ChecksumFileDownload",
      "Source": "https://raw.githubusercontent.com/mozilla-releng/OpenCloudConfig/master/userdata/Configuration/Mozilla%20Maintenance%20Service/MozFakeCA.cer",
      "Target": "C:\\dsc\\MozillaMaintenance\\MozFakeCA.cer",
      "DependsOn": [
        {
          "ComponentType": "DirectoryCreate",
          "ComponentName": "MozillaMaintenanceDir"
        }
      ]
    },
    {
      "ComponentName": "MozFakeCA_cer",
      "ComponentType": "CommandRun",
      "Command": "certutil.exe",
      "Arguments": [
        "-addstore",
        "Root",
        "C:\\dsc\\MozillaMaintenance\\MozFakeCA.cer"
      ],
      "DependsOn": [
        {
          "ComponentType": "ChecksumFileDownload",
          "ComponentName": "MozFakeCA_cer"
        }
      ]
    },
    {
      "ComponentName": "MozFakeCA_2017_10_13_cer",
      "ComponentType": "ChecksumFileDownload",
      "Source": "https://raw.githubusercontent.com/mozilla-releng/OpenCloudConfig/master/userdata/Configuration/Mozilla%20Maintenance%20Service/MozFakeCA_2017-10-13.cer",
      "Target": "C:\\dsc\\MozillaMaintenance\\MozFakeCA_2017-10-13.cer",
      "DependsOn": [
        {
          "ComponentType": "DirectoryCreate",
          "ComponentName": "MozillaMaintenanceDir"
        }
      ]
    },
    {
      "ComponentName": "MozFakeCA_2017_10_13_cer",
      "ComponentType": "CommandRun",
      "Command": "certutil.exe",
      "Arguments": [
        "-addstore",
        "Root",
        "C:\\dsc\\MozillaMaintenance\\MozFakeCA_2017-10-13.cer"
      ],
      "DependsOn": [
        {
          "ComponentType": "ChecksumFileDownload",
          "ComponentName": "MozFakeCA_2017_10_13_cer"
        }
      ]
    },
    {
      "ComponentName": "MozRoot_cer",
      "ComponentType": "ChecksumFileDownload",
      "Source": "https://s3.amazonaws.com/windows-opencloudconfig-packages/certs/MozRoot.cer",
      "Target": "C:\\dsc\\MozillaMaintenance\\MozRoot.cer",
      "DependsOn": [
        {
          "ComponentType": "DirectoryCreate",
          "ComponentName": "MozillaMaintenanceDir"
        }
      ]
    },
    {
      "ComponentName": "MozRoot_cer",
      "ComponentType": "CommandRun",
      "Command": "certutil.exe",
      "Arguments": [
        "-addstore",
        "Root",
        "C:\\dsc\\MozillaMaintenance\\MozRoot.cer"
      ],
      "DependsOn": [
        {
          "ComponentType": "ChecksumFileDownload",
          "ComponentName": "MozRoot_cer"
        }
      ]
    },
    {
      "ComponentName": "reg_Mozilla_MaintenanceService_3932ecacee736d366d6436db0f55bce4_0_name",
      "ComponentType": "RegistryValueSet",
      "Key": "HKEY_LOCAL_MACHINE\\SOFTWARE\\Mozilla\\MaintenanceService\\3932ecacee736d366d6436db0f55bce4\\0",
      "ValueName": "name",
      "ValueType": "String",
      "ValueData": "Mozilla Corporation"
    },
    {
      "ComponentName": "reg_Mozilla_MaintenanceService_3932ecacee736d366d6436db0f55bce4_0_issuer",
      "ComponentType": "RegistryValueSet",
      "Key": "HKEY_LOCAL_MACHINE\\SOFTWARE\\Mozilla\\MaintenanceService\\3932ecacee736d366d6436db0f55bce4\\0",
      "ValueName": "issuer",
      "ValueType": "String",
      "ValueData": "Thawte Code Signing CA - G2"
    },
    {
      "ComponentName": "reg_Mozilla_MaintenanceService_3932ecacee736d366d6436db0f55bce4_0_programName",
      "ComponentType": "RegistryValueSet",
      "Key": "HKEY_LOCAL_MACHINE\\SOFTWARE\\Mozilla\\MaintenanceService\\3932ecacee736d366d6436db0f55bce4\\0",
      "ValueName": "programName",
      "ValueType": "String",
      "ValueData": ""
    },
    {
      "ComponentName": "reg_Mozilla_MaintenanceService_3932ecacee736d366d6436db0f55bce4_0_publisherLink",
      "ComponentType": "RegistryValueSet",
      "Key": "HKEY_LOCAL_MACHINE\\SOFTWARE\\Mozilla\\MaintenanceService\\3932ecacee736d366d6436db0f55bce4\\0",
      "ValueName": "publisherLink",
      "ValueType": "String",
      "ValueData": ""
    },
    {
      "ComponentName": "reg_Mozilla_MaintenanceService_3932ecacee736d366d6436db0f55bce4_1_name",
      "ComponentType": "RegistryValueSet",
      "Key": "HKEY_LOCAL_MACHINE\\SOFTWARE\\Mozilla\\MaintenanceService\\3932ecacee736d366d6436db0f55bce4\\1",
      "ValueName": "name",
      "ValueType": "String",
      "ValueData": "Mozilla Fake SPC"
    },
    {
      "ComponentName": "reg_Mozilla_MaintenanceService_3932ecacee736d366d6436db0f55bce4_1_issuer",
      "ComponentType": "RegistryValueSet",
      "Key": "HKEY_LOCAL_MACHINE\\SOFTWARE\\Mozilla\\MaintenanceService\\3932ecacee736d366d6436db0f55bce4\\1",
      "ValueName": "issuer",
      "ValueType": "String",
      "ValueData": "Mozilla Fake CA"
    },
    {
      "ComponentName": "reg_Mozilla_MaintenanceService_3932ecacee736d366d6436db0f55bce4_1_programName",
      "ComponentType": "RegistryValueSet",
      "Key": "HKEY_LOCAL_MACHINE\\SOFTWARE\\Mozilla\\MaintenanceService\\3932ecacee736d366d6436db0f55bce4\\1",
      "ValueName": "programName",
      "ValueType": "String",
      "ValueData": ""
    },
    {
      "ComponentName": "reg_Mozilla_MaintenanceService_3932ecacee736d366d6436db0f55bce4_1_publisherLink",
      "ComponentType": "RegistryValueSet",
      "Key": "HKEY_LOCAL_MACHINE\\SOFTWARE\\Mozilla\\MaintenanceService\\3932ecacee736d366d6436db0f55bce4\\1",
      "ValueName": "publisherLink",
      "ValueType": "String",
      "ValueData": ""
    },
    {
      "ComponentName": "reg_Mozilla_MaintenanceService_3932ecacee736d366d6436db0f55bce4_2_name",
      "ComponentType": "RegistryValueSet",
      "Key": "HKEY_LOCAL_MACHINE\\SOFTWARE\\Mozilla\\MaintenanceService\\3932ecacee736d366d6436db0f55bce4\\2",
      "ValueName": "name",
      "ValueType": "String",
      "ValueData": "Mozilla Corporation"
    },
    {
      "ComponentName": "reg_Mozilla_MaintenanceService_3932ecacee736d366d6436db0f55bce4_2_issuer",
      "ComponentType": "RegistryValueSet",
      "Key": "HKEY_LOCAL_MACHINE\\SOFTWARE\\Mozilla\\MaintenanceService\\3932ecacee736d366d6436db0f55bce4\\2",
      "ValueName": "issuer",
      "ValueType": "String",
      "ValueData": "DigiCert SHA2 Assured ID Code Signing CA"
    },
    {
      "ComponentName": "reg_Mozilla_MaintenanceService_3932ecacee736d366d6436db0f55bce4_2_programName",
      "ComponentType": "RegistryValueSet",
      "Key": "HKEY_LOCAL_MACHINE\\SOFTWARE\\Mozilla\\MaintenanceService\\3932ecacee736d366d6436db0f55bce4\\2",
      "ValueName": "programName",
      "ValueType": "String",
      "ValueData": ""
    },
    {
      "ComponentName": "reg_Mozilla_MaintenanceService_3932ecacee736d366d6436db0f55bce4_2_publisherLink",
      "ComponentType": "RegistryValueSet",
      "Key": "HKEY_LOCAL_MACHINE\\SOFTWARE\\Mozilla\\MaintenanceService\\3932ecacee736d366d6436db0f55bce4\\2",
      "ValueName": "publisherLink",
      "ValueType": "String",
      "ValueData": ""
    },
    {
      "ComponentName": "GrantEveryoneMozillaRegistryWriteAccess",
      "ComponentType": "CommandRun",
      "Comment": "Bug 1353889 - Grant all users account write access to Mozilla registry key",
      "Command": "powershell",
      "Arguments": [
        "-command",
        "\"& {(Get-Acl -Path 'HKLM:\\SOFTWARE\\Mozilla').SetAccessRule((New-Object -TypeName 'System.Security.AccessControl.RegistryAccessRule' -ArgumentList @('Everyone', 'FullControl', 'Allow')))}\""
      ]
    },
    {
      "ComponentName": "KmsIn",
      "ComponentType": "FirewallRule",
      "Protocol": "TCP",
      "LocalPort": 1688,
      "Direction": "Inbound",
      "Action": "Allow"
    },
    {
      "ComponentName": "KmsOut",
      "ComponentType": "FirewallRule",
      "Protocol": "TCP",
      "LocalPort": 1688,
      "Direction": "Outbound",
      "Action": "Allow"
    },
    {
      "ComponentName": "nircmd",
      "ComponentType": "FileDownload",
      "Source": "https://s3.amazonaws.com/windows-opencloudconfig-packages/nircmd/nircmd.exe",
      "Target": "C:\\Windows\\System32\\nircmd.exe",
      "sha512": "560aaadebcbd425d35fc3a567c987a5f15a5f091962328f0479c1ec2378c732cca892eb3252179c8895413b0f3d08f44fbcf8c9d2375877c81622f42e6549c86"
    },
    {
      "ComponentName": "nircmdc",
      "ComponentType": "FileDownload",
      "Source": "https://s3.amazonaws.com/windows-opencloudconfig-packages/nircmd/nircmdc.exe",
      "Target": "C:\\Windows\\System32\\nircmdc.exe",
      "sha512": "0ad1ba0df5efdf0354c2ecc9e97be03823636feeda1a4afe7666bdc661cd22b309d0a05e16453b6692c68f0ad5fd05abec480a5cdc13612fab2a3353c8eb1cc6"
    },
    {
      "ComponentName": "reg_Power_PreferredPlan_HighPerformance",
      "ComponentType": "RegistryValueSet",
      "Comment": "https://bugzilla.mozilla.org/show_bug.cgi?id=1362613",
      "Key": "HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\explorer\\ControlPanel\\NameSpace\\{025A5937-A6BE-4686-A844-36FE4BEC8B6D}",
      "ValueName": "PreferredPlan",
      "ValueType": "String",
      "ValueData": "8c5e7fda-e8bf-4a96-9a85-a6e23a8c635c"
    },
    {
      "ComponentName": "DisableWinDefend",
      "ComponentType": "ServiceControl",
      "Comment": "https://bugzilla.mozilla.org/show_bug.cgi?id=1365909",
      "Name": "WinDefend",
      "StartupType": "Disabled",
      "State": "Stopped"
    },
    {
      "ComponentName": "OpenSshDownload",
      "ComponentType": "FileDownload",
      "Comment": "https://bugzilla.mozilla.org/show_bug.cgi?id=1454578",
      "Source": "https://github.com/PowerShell/Win32-OpenSSH/releases/download/v7.6.1.0p1-Beta/OpenSSH-Win32.zip",
      "Target": "C:\\Windows\\Temp\\OpenSSH-Win32.zip",
      "sha512": "2a9b3b43e7791c117931c612cb59659abebb0d680f4df24563ec2bf660af6b80d9459a8d07072f7c7ad549fd176a140494605486f7d681c9889ae35440396a4f"
    },
    {
      "ComponentName": "OpenSshUnzip",
      "ComponentType": "CommandRun",
      "Comment": "https://bugzilla.mozilla.org/show_bug.cgi?id=1454578",
      "Command": "C:\\Program Files\\7-Zip\\7z.exe",
      "Arguments": [
        "x",
        "-o\"C:\\Program Files\"",
        "C:\\Windows\\Temp\\OpenSSH-Win32.zip"
      ],
      "DependsOn": [
        {
          "ComponentType": "ExeInstall",
          "ComponentName": "SevenZip"
        },
        {
          "ComponentType": "FileDownload",
          "ComponentName": "OpenSshDownload"
        }
      ],
      "Validate": {
        "PathsExist": [
          "C:\\Program Files\\OpenSSH-Win32\\sshd.exe",
          "C:\\Program Files\\OpenSSH-Win32\\ssh-agent.exe",
          "C:\\Program Files\\OpenSSH-Win32\\install-sshd.ps1"
        ]
      }
    },
    {
      "ComponentName": "SshIn",
      "ComponentType": "FirewallRule",
      "Protocol": "TCP",
      "LocalPort": 22,
      "Direction": "Inbound",
      "Action": "Allow"
    },
    {
      "ComponentName": "InstallOpenSSH",
      "ComponentType": "CommandRun",
      "Comment": "https://bugzilla.mozilla.org/show_bug.cgi?id=1454578",
      "Command": "powershell.exe",
      "Arguments": [
        "-ExecutionPolicy",
        "Bypass",
        "-File",
        "\"C:\\Program Files\\OpenSSH-Win32\\install-sshd.ps1\""
      ],
      "DependsOn": [
        {
          "ComponentType": "CommandRun",
          "ComponentName": "OpenSshUnzip"
        }
      ]
    },
    {
      "ComponentName": "reg_OpenSSH_DefaultShell",
      "ComponentType": "RegistryValueSet",
      "Comment": "https://bugzilla.mozilla.org/show_bug.cgi?id=1454578",
      "Key": "HKEY_LOCAL_MACHINE\\SOFTWARE\\OpenSSH",
      "ValueName": "DefaultShell",
      "ValueType": "String",
      "ValueData": "C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\powershell.exe"
    },
    {
      "ComponentName": "reg_OpenSSH_DefaultShellCommandOption",
      "ComponentType": "RegistryValueSet",
      "Comment": "https://bugzilla.mozilla.org/show_bug.cgi?id=1454578",
      "Key": "HKEY_LOCAL_MACHINE\\SOFTWARE\\OpenSSH",
      "ValueName": "DefaultShellCommandOption",
      "ValueType": "String",
      "ValueData": "/c"
    },
    {
      "ComponentName": "AdministratorSshDir",
      "ComponentType": "DirectoryCreate",
      "Comment": "https://bugzilla.mozilla.org/show_bug.cgi?id=1454578",
      "Path": "C:\\Users\\Administrator\\.ssh"
    },
    {
      "ComponentName": "AdministratorSshAuthorisedKeys",
      "ComponentType": "ChecksumFileDownload",
      "Comment": "https://bugzilla.mozilla.org/show_bug.cgi?id=1454578",
      "Source": "https://raw.githubusercontent.com/mozilla-releng/OpenCloudConfig/master/userdata/Configuration/ssh/authorized_keys",
      "Target": "C:\\Users\\Administrator\\.ssh\\authorized_keys",
      "DependsOn": [
        {
          "ComponentType": "DirectoryCreate",
          "ComponentName": "AdministratorSshDir"
        }
      ]
    },
    {
      "ComponentName": "ProgramDataSshDir",
      "ComponentType": "DirectoryCreate",
      "Comment": "https://bugzilla.mozilla.org/show_bug.cgi?id=1454578",
      "Path": "C:\\ProgramData\\ssh"
    },
    {
      "ComponentName": "sshd_config",
      "ComponentType": "ChecksumFileDownload",
      "Comment": "https://bugzilla.mozilla.org/show_bug.cgi?id=1464343",
      "Source": "https://raw.githubusercontent.com/mozilla-releng/OpenCloudConfig/master/userdata/Configuration/ssh/sshd_config",
      "Target": "C:\\ProgramData\\ssh\\sshd_config",
      "DependsOn": [
        {
          "ComponentType": "CommandRun",
          "ComponentName": "InstallOpenSSH"
        },
        {
          "ComponentType": "DirectoryCreate",
          "ComponentName": "ProgramDataSshDir"
        }
      ]
    },
    {
      "ComponentName": "Start_sshd",
      "ComponentType": "ServiceControl",
      "Comment": "https://bugzilla.mozilla.org/show_bug.cgi?id=1454578",
      "Name": "sshd",
      "StartupType": "Automatic",
      "State": "Running",
      "DependsOn": [
        {
          "ComponentType": "ChecksumFileDownload",
          "ComponentName": "sshd_config"
        }
      ]
    },
    {
      "ComponentName": "Start_sshagent",
      "ComponentType": "ServiceControl",
      "Comment": "https://bugzilla.mozilla.org/show_bug.cgi?id=1454578",
      "Name": "ssh-agent",
      "StartupType": "Automatic",
      "State": "Running",
      "DependsOn": [
        {
          "ComponentType": "CommandRun",
          "ComponentName": "InstallOpenSSH"
        }
      ]
    },
    {
      "ComponentName": "vcredist_vs2015_x86",
      "ComponentType": "ExeInstall",
      "Comment": "https://bugzilla.mozilla.org/show_bug.cgi?id=1460042",
      "Url": "http://download.microsoft.com/download/f/3/9/f39b30ec-f8ef-4ba3-8cb4-e301fcf0e0aa/vc_redist.x86.exe",
      "Arguments": [
        "/install",
        "/passive",
        "/norestart",
        "/log",
        "C:\\log\\vcredist_vs2015_x86-install.log"
      ],
      "Validate": {
        "PathsExist": [
          "C:\\Windows\\SysWOW64\\vcruntime140.dll"
        ]
      },
      "sha512": "c0eac71b95d1c0232ce1457561a66e24d3ef687ba8012f072d28f89df9dd409584b262b7bac9977f500ec99c0c31138c36f0da48972b818bacba2bc601d5f3a4"
    },
    {
      "ComponentName": "ProgramData_Mozilla_AccessRights",
      "ComponentType": "CommandRun",
      "Comment": "https://bugzilla.mozilla.org/show_bug.cgi?id=1494048",
      "Command": "icacls.exe",
      "Arguments": [
        "c:\\ProgramData\\Mozilla",
        "/grant",
        "Everyone:(OI)(CI)F"
      ],
      "DependsOn": [
        {
          "ComponentType": "CommandRun",
          "ComponentName": "maintenanceservice_install"
        }
      ]
    },
    {
      "ComponentName": "HostsFile",
      "ComponentType": "ChecksumFileDownload",
      "Comment": "https://bugzilla.mozilla.org/show_bug.cgi?id=1497308",
      "Source": "https://raw.githubusercontent.com/mozilla-releng/OpenCloudConfig/master/userdata/Configuration/etc/hosts",
      "Target": "C:\\Windows\\System32\\drivers\\etc\\hosts",
      "sha512": "b44037cc5f1e156c01a0ea059a1b0416580f8cf344d237b924da21e3eec3765be0205bce8e6876882122cd8b39f87f7710002aa6dba98b05aee336ba5e0be14d"
    },
    {
      "ComponentName": "SetHostsFileContent",
      "ComponentType": "ReplaceInFile",
      "Comment": "https://bugzilla.mozilla.org/show_bug.cgi?id=1497308",
      "Path": "C:\\Windows\\System32\\drivers\\etc\\hosts",
      "Match": "127\\.0\\.0\\.1 (hostname|i-[a-f0-9]{17})\\.(workertype|gecko-([1-3]-b-win2012(-alpha|-beta)?|t-win(7-32|10-64)(-gpu(-a|-b)?|-alpha|-beta|-cu)?))\\.(ec2region|(us|eu)[ewc][12])\\.mozilla\\.com",
      "Replace": "('127.0.0.1 {0}.{1}' -f ((New-Object Net.WebClient).DownloadString('http://169.254.169.254/latest/meta-data/instance-id')), ((Get-ItemProperty -Path 'HKLM:SYSTEM\\CurrentControlSet\\Services\\Tcpip\\Parameters' -Name 'NV Domain').'NV Domain').Replace('wintest.releng.', ''))",
      "DependsOn": [
        {
          "ComponentType": "ChecksumFileDownload",
          "ComponentName": "HostsFile"
        }
      ]
    },
    {
      "ComponentName": "env_TASKCLUSTER_ROOT_URL",
      "ComponentType": "EnvironmentVariableSet",
      "Comment": "https://bugzilla.mozilla.org/show_bug.cgi?id=1551789",
      "Name": "TASKCLUSTER_ROOT_URL",
      "Value": "https://firefox-ci-tc.services.mozilla.com",
      "Target": "Machine"
    },
    {
      "ComponentName": "programdata_google_auth",
      "ComponentType": "DirectoryCreate",
      "Comment": "https://bugzilla.mozilla.org/show_bug.cgi?id=1588757",
      "Path": "C:\\ProgramData\\Google\\Auth"
    },
    {
      "ComponentName": "stackdriver_key",
      "ComponentType": "SymbolicLink",
      "Comment": "https://bugzilla.mozilla.org/show_bug.cgi?id=1588757",
      "Target": "C:\\builds\\taskcluster-worker-ec2@aws-stackdriver-log-1571127027.json",
      "Link": "C:\\ProgramData\\Google\\Auth\\application_default_credentials.json",
      "DependsOn": [
        {
          "ComponentType": "ExeInstall",
          "ComponentName": "GpgForWin"
        },
        {
          "ComponentType": "DirectoryCreate",
          "ComponentName": "programdata_google_auth"
        }
      ]
    }
  ],
  "ProvisionerConfiguration": {
    "instanceTypes": [
      {
        "instanceType": "c4.2xlarge",
        "capacity": 1,
        "utility": 1,
        "secrets": {},
        "scopes": [],
        "userData": {},
        "launchSpec": {
          "BlockDeviceMappings": [
            {
              "DeviceName": "/dev/sda1",
              "Ebs": {
                "VolumeType": "gp2",
                "VolumeSize": 30,
                "DeleteOnTermination": true
              }
            },
            {
              "DeviceName": "/dev/sdb",
              "Ebs": {
                "VolumeType": "gp2",
                "VolumeSize": 120,
                "DeleteOnTermination": true
              }
            },
            {
              "DeviceName": "/dev/sdc",
              "Ebs": {
                "VolumeType": "gp2",
                "VolumeSize": 120,
                "DeleteOnTermination": true
              }
            }
          ]
        }
      }
    ]
  }
}
